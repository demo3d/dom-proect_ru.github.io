<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

    <script src='https://api.mapbox.com/mapbox-gl-js/v0.29.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v0.29.0/mapbox-gl.css' rel='stylesheet' />

<!--     <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css" /> -->
<!--     <script src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js"></script> -->


    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top: 2em; bottom: 1em; width:100%; }

        #marker {
            background-image: url('https://www.mapbox.com/mapbox-gl-js/assets/washington-monument.jpg');
            background-size: cover;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
        }

        .mapboxgl-popup {
            max-width: 200px;
        }        
    </style>
</head>
<body>


    <div id='menu'>
        <input id='basic' type='radio' name='rtoggle' value='basic' checked='checked'>
        <label for='basic'>basic</label>
        <input id='streets' type='radio' name='rtoggle' value='streets'>
        <label for='streets'>streets</label>
        <input id='bright' type='radio' name='rtoggle' value='bright'>
        <label for='bright'>bright</label>
        <input id='light' type='radio' name='rtoggle' value='light'>
        <label for='light'>light</label>
        <input id='dark' type='radio' name='rtoggle' value='dark'>
        <label for='dark'>dark</label>
        <input id='satellite' type='radio' name='rtoggle' value='satellite'>
        <label for='satellite'>satellite</label>
    </div>    

    <div id='map'></div>
<script>
    var token = 'pk.eyJ1IjoiaW5mb2RpcnNldmVuIiwiYSI6ImNpeGYydDF3eDAwNXEydG1nMGZpb3BkbHUifQ.MfksQpMsResB7x7On2XtiA';
//     mapboxgl.accessToken = 'pk.eyJ1IjoiamVzc3RlbGZvcmQiLCJhIjoiY2l3M3d6OTlrMDA0aTJ6cXNraHByMzdiZyJ9.MAfasjh0CP0D6_OHAYAGaw';
    mapboxgl.accessToken = token;

    var map = new mapboxgl.Map({
    attributionControl: true,
    container: 'map', // container id
    style: 'mapbox://styles/mapbox/bright-v9?optimize=true', //stylesheet location streets
        
//    style: 'mapbox://styles/mapbox/satellite-streets-v9?optimize=true', //stylesheet location
//    style: 'mapbox://styles/mapbox/outdoors-v9', //stylesheet location
    center: [-74.50, 40], // starting position
    bearing: 0,
    pitch: 60,
    hash: true,
//     image: {
//       "type": "image",
//       "url": "radar.gif",
//       "coordinates": [
//           [-80.425, 46.437],
//           [-71.516, 46.437],
//           [-71.516, 37.936],
//           [-80.425, 37.936]
//       ]
//     },
    zoom: 13 // starting zoom
});

var nav = new mapboxgl.NavigationControl();
map.addControl(nav, 'top-left');

map.addControl(new mapboxgl.GeolocateControl({
    positionOptions: {
        enableHighAccuracy: true
    }
}));

map.on('load', function() {
//     basic
    console.log('load');
//   map.addSource('terrain-data', {
//     type: 'vector',
//     url: 'mapbox://mapbox.mapbox-terrain-v2'
//   });
});    
    
function onMapClick(e) {
    console.log("You clicked the map at " + e);
}
map.on('click', onMapClick);
    
navigator.geolocation.watchPosition(
  function(position) {
    var long = position.coords.longitude;
    var lat = position.coords.latitude;
    map.setCenter([long, lat]);
  },
  console.error.bind(console),
  {enableHighAccuracy: true}
);


var layerList = document.getElementById('menu');
var inputs = layerList.getElementsByTagName('input');

function switchLayer(layer) {
    var layerId = layer.target.id;
    map.setStyle('mapbox://styles/mapbox/' + layerId + '-v9');
}

for (var i = 0; i < inputs.length; i++) {
    inputs[i].onclick = switchLayer;
}

    
// var popup1 = new mapboxgl.Popup({closeOnClick: true})
//     .setLngLat([50, 127])
//     .setHTML('<h1>Беседка на набережной!</h1>')
//     .addTo(map);

// create the popup
var popup2 = new mapboxgl.Popup({offset:[51, 128]})
    .setText('Construction on the Washington Monument began in 1848.');

// create DOM element for the marker
var el = document.createElement('div');
el.id = 'marker';

// create the marker
new mapboxgl.Marker(el, {offset:[-25, -25]})
    .setLngLat([51, 54])
    .setPopup(popup2) // sets a popup on this marker
    .addTo(map);
    
</script>

</body>
</html>
